Data.New$Study %>% unique() %>% length()
Data$Study %>% unique() %>% length()
Data$Study %>% unique() %>% length()
########################################################################################################################
########################################################################################################################
#### Create new data frame with growth form matching
########################################################################################################################
########################################################################################################################
Data.New <-
Data %>%
filter(GrowthFormA != "NA",
GrowthFormB != "NA") %>%
filter(ConditionLength != "NA",
ResponseLength != "NA") %>%
mutate(GrowthFormA_Cat1 = sapply(str_split(GrowthFormA, "_"), function(x) x[1]),
GrowthFormA_Cat2 = sapply(str_split(GrowthFormA, "_"), function(x) x[2]),
GrowthFormB_Cat1 = sapply(str_split(GrowthFormB, "_"), function(x) x[1]),
GrowthFormB_Cat2 = sapply(str_split(GrowthFormB, "_"), function(x) x[2]),
SameFormExact = case_when(GrowthFormA == GrowthFormB ~ GrowthFormA,
GrowthFormA != GrowthFormB ~ paste(GrowthFormA, "___", GrowthFormB, sep="")),
SameForm_Cat1 = case_when(GrowthFormA_Cat1 == GrowthFormB_Cat1 ~ GrowthFormA_Cat1,
GrowthFormA_Cat1 != GrowthFormB_Cat1 ~ "Annual/Perennial"),
SameForm_Cat2 = case_when(GrowthFormA_Cat2 == GrowthFormB_Cat2 ~ GrowthFormA_Cat2,
GrowthFormA_Cat2 != GrowthFormB_Cat2 ~ paste(GrowthFormA_Cat2, "___", GrowthFormB_Cat2, sep=""))) %>%
mutate(SameForm_Cat2 = case_when(SameForm_Cat2 %in% c("Graminoid", "Forb", "Shrub", "Tree") ~ SameForm_Cat2,
SameForm_Cat2 %in% c("Graminoid___Forb", "Forb___Graminoid") ~ "Graminoid___Forb",
SameForm_Cat2 %in% c("Graminoid___Shrub", "Shrub___Graminoid") ~ "Graminoid___Shrub",
SameForm_Cat2 %in% c("Forb___Shrub", "Shrub___Forb") ~ "Forb___Shrub"))
Data.New$Study %>% unique() %>% length()
Data.New$Study %>% unique()
########################################################################################################################
########################################################################################################################
#### Plot conditioning and response length information
#### Color coded with annual vs. perennial
#### Scattered pie charts + Stacked histograms as marginal distribution, because, why not
########################################################################################################################
########################################################################################################################
#### Create data for plotting the scatterpie -- key is pivot_wider()
Data.ScatterPie.Cat1 <-
Data.New %>%
group_by(Study, ConditionLength, ResponseLength, SameForm_Cat1) %>%
summarise(Count = n()) %>%
mutate(Freq = round(Count / sum(Count), 3)) %>%
mutate(NumberExperiment = sum(Count)) %>%
select(Study, ConditionLength, ResponseLength, SameForm_Cat1, NumberExperiment, Freq) %>%
mutate(ConditionLength = case_when(ConditionLength == "Field" ~ "38.5",
ConditionLength != "Field" ~ ConditionLength)) %>%
pivot_wider(names_from = SameForm_Cat1, values_from = Freq, values_fill = 0) %>%
mutate(ConditionLength = as.numeric(ConditionLength),
ResponseLength = as.numeric(ResponseLength),
Radius = log10(NumberExperiment+1))
View(Data.ScatterPie.Cat1)
########################################################################################################################
########################################################################################################################
#### Another way to plot scattered pie charts
#### This approach handles overlapping pie charts better
########################################################################################################################
########################################################################################################################
#### Create the data without pivot_wider()
df <-
Data.New %>%
filter(ConditionLength != 48) %>%
group_by(Study, ConditionLength, ResponseLength, SameForm_Cat1) %>%
summarise(Count = n()) %>%
mutate(Freq = round(Count / sum(Count), 3)) %>%
mutate(NumberExperiment = sum(Count)) %>%
select(Study, ConditionLength, ResponseLength, SameForm_Cat1, Count, NumberExperiment) %>%
mutate(ConditionLength = case_when(ConditionLength == "Field" ~ "38.5",
ConditionLength != "Field" ~ ConditionLength)) %>%
mutate(ConditionLength = as.numeric(ConditionLength),
ResponseLength = as.numeric(ResponseLength))
df
### Data summary
# 1. Number of annual–perennial pairs
df %>%
ungroup() %>%
select(Study, SameForm_Cat1) %>%
distinct() %>%
filter(SameForm_Cat1 == "Annual/Perennial")
Data.New %>%
select(Study, SameForm_Cat1) %>%
distinct() %>%
filter(SameForm_Cat1 == "Annual/Perennial")
### Data summary
# 1. Number of annual–perennial pairs
df %>%
ungroup() %>%
select(Study, SameForm_Cat1) %>%
distinct() %>%
filter(SameForm_Cat1 == "Annual/Perennial")
View(df)
unlist(Data.ScatterPie.Cat1[(Data.ScatterPie.Cat1$Perennial == 1.0 | Data.ScatterPie.Cat1$Annual == 1.0), "Study"]
, use.names = F)
df %>%
filter(Study %in% unlist(Data.ScatterPie.Cat1[(Data.ScatterPie.Cat1$Perennial == 1.0 | Data.ScatterPie.Cat1$Annual == 1.0), "Study"], use.names = F))
df %>%
filter(Study %in% unlist(Data.ScatterPie.Cat1[(Data.ScatterPie.Cat1$"Annual/Perennial" == 1.0), "Study"], use.names = F))
df %>%
filter(Study %in% unlist(Data.ScatterPie.Cat1[(Data.ScatterPie.Cat1$"Annual/Perennial" == 1.0), "Study"], use.names = F))
df %>%
filter(Study %in% unlist(Data.ScatterPie.Cat1[!(Data.ScatterPie.Cat1$Perennial == 1.0 | Data.ScatterPie.Cat1$Annual == 1.0 | Data.ScatterPie.Cat1$"Annual/Perennial" == 1.0), "Study"], use.names = F))
df %>%
filter(Study %in% unlist(Data.ScatterPie.Cat1[!(Data.ScatterPie.Cat1$Perennial == 1.0 | Data.ScatterPie.Cat1$Annual == 1.0 | Data.ScatterPie.Cat1$"Annual/Perennial" == 1.0), "Study"], use.names = F)) %>%
select(Study, SameForm_Cat1) %>%
distinct()
df %>%
ungroup() %>%
filter(Study %in% unlist(Data.ScatterPie.Cat1[!(Data.ScatterPie.Cat1$Perennial == 1.0 | Data.ScatterPie.Cat1$Annual == 1.0 | Data.ScatterPie.Cat1$"Annual/Perennial" == 1.0), "Study"], use.names = F)) %>%
select(Study, SameForm_Cat1) %>%
distinct()
df %>%
ungroup() %>%
filter(Study %in% unlist(Data.ScatterPie.Cat1[!(Data.ScatterPie.Cat1$Perennial == 1.0 | Data.ScatterPie.Cat1$Annual == 1.0 | Data.ScatterPie.Cat1$"Annual/Perennial" == 1.0), "Study"], use.names = F)) %>%
select(Study, SameForm_Cat1) %>%
distinct() %>%
filter(SameForm_Cat1 == "Annual/Perennial")
Data$Study %>% unique() %>% length()
### Data summary
# 1. Number of annual–perennial pairs
df %>%
ungroup() %>%
select(Study, SameForm_Cat1) %>%
distinct() %>%
filter(SameForm_Cat1 == "Annual/Perennial")
### Data summary
# 1. Number of annual–perennial pairs
Data.New %>%
ungroup() %>%
select(Study, SameForm_Cat1) %>%
distinct() %>%
filter(SameForm_Cat1 == "Annual/Perennial")
### Data summary
# 1. Number of studies
Data$Study %>%
unique() %>%
length()
### Data summary
# 1. Number of studies
Data.New$Study %>%
unique() %>%
length()
### Data summary
# 1. Number of studies
df$Study %>%
unique() %>%
length()
Data %>%
filter(GrowthFormA != "NA",
GrowthFormB != "NA") %>%
filter(ConditionLength != "NA",
ResponseLength != "NA")
Data.New %>%
group_by(Study, ConditionLength, ResponseLength, SameForm_Cat1) %>%
summarise(Count = n())
### Data summary
# 1. Number of studies
Data$Study %>%
unique() %>%
length()
# 2. Number of experiments
Data$Experiment %>%
unique() %>%
length()
# 2. Number of experiments
Data$`Pairwise comparison` %>%
unique() %>%
length()
str_extract(Data$GrowthFormA, pattern = "[A-Za-z]")
str_extract(Data$GrowthFormA, pattern = "[A-Za-z]*")
# 1. Number of annual–perennial pairs
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-"))
# 1. Number of studies with annual–perennial pairs
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual–Perennial" | formtype == "Perennial-Annual")
# 1. Number of studies with annual–perennial pairs
aaa <- Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual–Perennial" | formtype == "Perennial-Annual")
aaa
View(aaa)
# 1. Number of studies with annual–perennial pairs
aaa <- Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual–Perennial")
aaa <- Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-"))
View(aaa)
# 1. Number of studies with annual–perennial pairs
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual–Perennial" | formtype == "Perennial-Annual")
# 1. Number of studies with annual–perennial pairs
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual–Perennial" | formtype == "Perennial-Annual") %>%
.$Study %>%
unique()
# 1. Number of studies with annual–perennial pairs
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual–Perennial" | formtype == "Perennial-Annual") %>%
.$Study %>%
unique() %>%
length()
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-"))
Data.New %>%
select(Study, SameForm_Cat1)
Data.New %>%
select(Study, SameForm_Cat1) %>%
distinct()
Data.New %>%
select(Study, SameForm_Cat1) %>%
distinct() %>%
filter(SameForm_Cat1 == "Annual/Perennial")
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual–Perennial" | formtype == "Perennial-Annual") %>%
.$Study %>%
unique()
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-"))
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-"))
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-"))
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual–Perennial" )
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual-Perennial" )
# 1. Number of studies with annual–perennial pairs
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual-Perennial" | formtype == "Perennial-Annual") %>%
.$Study %>%
unique() %>%
length()
### Data summary
# 1. Number of studies
Data$Study %>%
unique() %>%
length()
# 2. Number of experiments
Data$`Pairwise comparison` %>%
unique() %>%
length()
# 1. Number of studies with annual–perennial pairs
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual-Perennial" | formtype == "Perennial-Annual") %>%
.$Study %>%
unique() %>%
length()
# 4. Number of experimental pairs with annual–perennial pairs
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual-Perennial" | formtype == "Perennial-Annual") %>%
.$`Pairwise comparison` %>%
unique() %>%
length()
19/106
# 2. Number of experimental pairs
Data$`Pairwise comparison` %>%
unique() %>%
length()
# 4. Number of experimental pairs with annual–perennial pairs
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual-Perennial" | formtype == "Perennial-Annual") %>%
.$`Pairwise comparison` %>%
unique() %>%
length()
107/1519
Data %>%
filter(ConditionLength != "Field") %>%
select(Study, ConditionLength)
Data %>%
filter(ConditionLength != "Field") %>%
select(Study, ConditionLength)
distinct()
# 5. Mean conditioning length
Data %>%
filter(ConditionLength != "Field") %>%
select(Study, ConditionLength) %>%
distinct()
# 5. Mean conditioning length
Data %>%
filter(ConditionLength != "Field") %>%
select(Study, ConditionLength) %>%
distinct() %>%
.$ConditionLength %>%
mean()
Data %>%
filter(ConditionLength != "Field" & !is.na(ConditionLength))
Data %>%
filter(ConditionLength != "Field" & !is.na(ConditionLength)) %>%
select(Study, ConditionLength)
Data %>%
filter(ConditionLength != "Field" & !is.na(ConditionLength)) %>%
select(Study, ConditionLength) %>%
distinct()
Data %>%
filter(ConditionLength != "Field" & !is.na(ConditionLength)) %>%
select(Study, ConditionLength) %>%
distinct() %>%
.$ConditionLength
# 5. Mean conditioning length
Data %>%
filter(ConditionLength != "Field" & !is.na(ConditionLength)) %>%
select(Study, ConditionLength) %>%
distinct() %>%
.$ConditionLength %>%
as.numeric() %>%
mean()
Data %>%
filter(ConditionLength == "Field") %>%
select(Study, ConditionLength) %>%
distinct()
# 6. Number of studies with field-conditioned soil
Data %>%
filter(ConditionLength == "Field") %>%
select(Study, ConditionLength) %>%
distinct() %>%
length()
# 6. Number of studies with field-conditioned soil
Data %>%
filter(ConditionLength == "Field") %>%
select(Study, ConditionLength) %>%
distinct()
# 6. Number of studies with field-conditioned soil
Data %>%
filter(ConditionLength == "Field") %>%
select(Study, ConditionLength) %>%
distinct() %>%
n()
Data %>%
filter(ConditionLength == "Field") %>%
select(Study, ConditionLength) %>%
distinct()
# 6. Number of studies with field-conditioned soil
Data %>%
filter(ConditionLength == "Field") %>%
select(Study, ConditionLength) %>%
distinct() %>%
unique(Study)
# 6. Number of studies with field-conditioned soil
Data %>%
filter(ConditionLength == "Field") %>%
select(Study, ConditionLength) %>%
distinct() %>%
.$Study %>%
unique() %>%
length()
47/106
# 7. Mean response length
Data %>%
filter(!is.na(ResponseLength)) %>%
select(Study, ResponseLength) %>%
distinct() %>%
.$ResponseLength %>%
as.numeric() %>%
mean()
Data %>%
filter(!is.na(ResponseLength)) %>%
select(Study, ResponseLength)
Data %>%
filter(!is.na(ResponseLength)) %>%
select(Study, ResponseLength) %>%
distinct()
Data %>%
filter(!is.na(ResponseLength)) %>%
select(Study, ResponseLength) %>%
distinct() %>%
.$ResponseLength
Data %>%
filter(!is.na(ResponseLength)) %>%
select(Study, ResponseLength) %>%
distinct() %>%
.$ResponseLength %>%
as.numeric()
Data %>%
filter(!is.na(ResponseLength)) %>%
select(Study, ResponseLength) %>%
distinct() %>%
.$ResponseLength
Data %>%
filter(ResponseLength == "NA") %>%
select(Study, ResponseLength) %>%
distinct() %>%
.$ResponseLength
# 7. Mean response length
Data %>%
filter(ResponseLength != "NA") %>%
select(Study, ResponseLength) %>%
distinct() %>%
.$ResponseLength %>%
as.numeric() %>%
mean()
# 3. Number of studies with annual–perennial pairs
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual-Perennial" | formtype == "Perennial-Annual") %>%
.$Study %>%
unique() %>%
length()
19/106
Data %>%
filter(ConditionLength == "Field")
# 6. Number of studies with field-conditioned soil
Data %>%
filter(ConditionLength == "Field") %>%
select(Study, ConditionLength) %>%
distinct() %>%
.$Study %>%
unique() %>%
length()
47/106
########################################################################################################################
########################################################################################################################
### Data summary
# 1. Number of studies
Data$Study %>%
unique() %>%
length()
# 2. Number of experimental pairs
Data$`Pairwise comparison` %>%
unique() %>%
length()
# 3. Number of studies with annual–perennial pairs
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual-Perennial" | formtype == "Perennial-Annual") %>%
.$Study %>%
unique() %>%
length()
# 4. Number of experimental pairs with annual–perennial pairs
Data %>%
mutate(formtype = str_c(str_extract(GrowthFormA, pattern = "[A-Za-z]*"),
str_extract(GrowthFormB, pattern = "[A-Za-z]*"),
sep = "-")) %>%
filter(formtype == "Annual-Perennial" | formtype == "Perennial-Annual") %>%
.$`Pairwise comparison` %>%
unique() %>%
length()
# 5. Mean conditioning length of studies
Data %>%
filter(ConditionLength != "Field" & !is.na(ConditionLength)) %>%
select(Study, ConditionLength) %>%
distinct() %>%
.$ConditionLength %>%
as.numeric() %>%
mean()
# 6. Number of studies with field-conditioned soil
Data %>%
filter(ConditionLength == "Field") %>%
select(Study, ConditionLength) %>%
distinct() %>%
.$Study %>%
unique() %>%
length()
# 7. Mean response length of studies
Data %>%
filter(ResponseLength != "NA") %>%
select(Study, ResponseLength) %>%
distinct() %>%
.$ResponseLength %>%
as.numeric() %>%
mean()
